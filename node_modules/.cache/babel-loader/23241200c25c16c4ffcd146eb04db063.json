{"ast":null,"code":"import _classCallCheck from \"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Array as ArrayT } from './Array.js';\nimport { Number as NumberT } from './Number.js';\nimport * as utils from './utils.js';\nexport var LazyArray = /*#__PURE__*/function (_ArrayT) {\n  _inherits(LazyArray, _ArrayT);\n\n  var _super = _createSuper(LazyArray);\n\n  function LazyArray() {\n    _classCallCheck(this, LazyArray);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(LazyArray, [{\n    key: \"decode\",\n    value: function decode(stream, parent) {\n      var pos = stream.pos;\n      var length = utils.resolveLength(this.length, stream, parent);\n\n      if (this.length instanceof NumberT) {\n        parent = {\n          parent: parent,\n          _startOffset: pos,\n          _currentOffset: 0,\n          _length: length\n        };\n      }\n\n      var res = new LazyArrayValue(this.type, length, stream, parent);\n      stream.pos += length * this.type.size(null, parent);\n      return res;\n    }\n  }, {\n    key: \"size\",\n    value: function size(val, ctx) {\n      if (val instanceof LazyArrayValue) {\n        val = val.toArray();\n      }\n\n      return _get(_getPrototypeOf(LazyArray.prototype), \"size\", this).call(this, val, ctx);\n    }\n  }, {\n    key: \"encode\",\n    value: function encode(stream, val, ctx) {\n      if (val instanceof LazyArrayValue) {\n        val = val.toArray();\n      }\n\n      return _get(_getPrototypeOf(LazyArray.prototype), \"encode\", this).call(this, stream, val, ctx);\n    }\n  }]);\n\n  return LazyArray;\n}(ArrayT);\n\nvar LazyArrayValue = /*#__PURE__*/function () {\n  function LazyArrayValue(type, length, stream, ctx) {\n    _classCallCheck(this, LazyArrayValue);\n\n    this.type = type;\n    this.length = length;\n    this.stream = stream;\n    this.ctx = ctx;\n    this.base = this.stream.pos;\n    this.items = [];\n  }\n\n  _createClass(LazyArrayValue, [{\n    key: \"get\",\n    value: function get(index) {\n      if (index < 0 || index >= this.length) {\n        return undefined;\n      }\n\n      if (this.items[index] == null) {\n        var pos = this.stream.pos;\n        this.stream.pos = this.base + this.type.size(null, this.ctx) * index;\n        this.items[index] = this.type.decode(this.stream, this.ctx);\n        this.stream.pos = pos;\n      }\n\n      return this.items[index];\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var result = [];\n\n      for (var i = 0, end = this.length; i < end; i++) {\n        result.push(this.get(i));\n      }\n\n      return result;\n    }\n  }]);\n\n  return LazyArrayValue;\n}();","map":{"version":3,"sources":["C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/restructure/src/LazyArray.js"],"names":["Array","ArrayT","Number","NumberT","utils","LazyArray","stream","parent","pos","length","resolveLength","_startOffset","_currentOffset","_length","res","LazyArrayValue","type","size","val","ctx","toArray","base","items","index","undefined","decode","result","i","end","push","get"],"mappings":";;;;;;AAAA,SAAQA,KAAK,IAAIC,MAAjB,QAA8B,YAA9B;AACA,SAAQC,MAAM,IAAIC,OAAlB,QAAgC,aAAhC;AACA,OAAO,KAAKC,KAAZ,MAAuB,YAAvB;AAEA,WAAaC,SAAb;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,WACE,gBAAOC,MAAP,EAAeC,MAAf,EAAuB;AACrB,UAAQC,GAAR,GAAgBF,MAAhB,CAAQE,GAAR;AACA,UAAMC,MAAM,GAAGL,KAAK,CAACM,aAAN,CAAoB,KAAKD,MAAzB,EAAiCH,MAAjC,EAAyCC,MAAzC,CAAf;;AAEA,UAAI,KAAKE,MAAL,YAAuBN,OAA3B,EAAoC;AAClCI,QAAAA,MAAM,GAAG;AACPA,UAAAA,MAAM,EAANA,MADO;AAEPI,UAAAA,YAAY,EAAEH,GAFP;AAGPI,UAAAA,cAAc,EAAE,CAHT;AAIPC,UAAAA,OAAO,EAAEJ;AAJF,SAAT;AAMD;;AAED,UAAMK,GAAG,GAAG,IAAIC,cAAJ,CAAmB,KAAKC,IAAxB,EAA8BP,MAA9B,EAAsCH,MAAtC,EAA8CC,MAA9C,CAAZ;AAEAD,MAAAA,MAAM,CAACE,GAAP,IAAcC,MAAM,GAAG,KAAKO,IAAL,CAAUC,IAAV,CAAe,IAAf,EAAqBV,MAArB,CAAvB;AACA,aAAOO,GAAP;AACD;AAlBH;AAAA;AAAA,WAoBE,cAAKI,GAAL,EAAUC,GAAV,EAAe;AACb,UAAID,GAAG,YAAYH,cAAnB,EAAmC;AACjCG,QAAAA,GAAG,GAAGA,GAAG,CAACE,OAAJ,EAAN;AACD;;AAED,iFAAkBF,GAAlB,EAAuBC,GAAvB;AACD;AA1BH;AAAA;AAAA,WA4BE,gBAAOb,MAAP,EAAeY,GAAf,EAAoBC,GAApB,EAAyB;AACvB,UAAID,GAAG,YAAYH,cAAnB,EAAmC;AACjCG,QAAAA,GAAG,GAAGA,GAAG,CAACE,OAAJ,EAAN;AACD;;AAED,mFAAoBd,MAApB,EAA4BY,GAA5B,EAAiCC,GAAjC;AACD;AAlCH;;AAAA;AAAA,EAA+BlB,MAA/B;;IAqCMc,c;AACJ,0BAAYC,IAAZ,EAAkBP,MAAlB,EAA0BH,MAA1B,EAAkCa,GAAlC,EAAuC;AAAA;;AACrC,SAAKH,IAAL,GAAYA,IAAZ;AACA,SAAKP,MAAL,GAAcA,MAAd;AACA,SAAKH,MAAL,GAAcA,MAAd;AACA,SAAKa,GAAL,GAAWA,GAAX;AACA,SAAKE,IAAL,GAAY,KAAKf,MAAL,CAAYE,GAAxB;AACA,SAAKc,KAAL,GAAa,EAAb;AACD;;;;WAED,aAAIC,KAAJ,EAAW;AACT,UAAKA,KAAK,GAAG,CAAT,IAAgBA,KAAK,IAAI,KAAKd,MAAlC,EAA2C;AACzC,eAAOe,SAAP;AACD;;AAED,UAAI,KAAKF,KAAL,CAAWC,KAAX,KAAqB,IAAzB,EAA+B;AAC7B,YAAQf,GAAR,GAAgB,KAAKF,MAArB,CAAQE,GAAR;AACA,aAAKF,MAAL,CAAYE,GAAZ,GAAkB,KAAKa,IAAL,GAAa,KAAKL,IAAL,CAAUC,IAAV,CAAe,IAAf,EAAqB,KAAKE,GAA1B,IAAiCI,KAAhE;AACA,aAAKD,KAAL,CAAWC,KAAX,IAAoB,KAAKP,IAAL,CAAUS,MAAV,CAAiB,KAAKnB,MAAtB,EAA8B,KAAKa,GAAnC,CAApB;AACA,aAAKb,MAAL,CAAYE,GAAZ,GAAkBA,GAAlB;AACD;;AAED,aAAO,KAAKc,KAAL,CAAWC,KAAX,CAAP;AACD;;;WAED,mBAAU;AACR,UAAMG,MAAM,GAAG,EAAf;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAG,KAAKnB,MAA3B,EAAmCkB,CAAC,GAAGC,GAAvC,EAA4CD,CAAC,EAA7C,EAAiD;AAC/CD,QAAAA,MAAM,CAACG,IAAP,CAAY,KAAKC,GAAL,CAASH,CAAT,CAAZ;AACD;;AACD,aAAOD,MAAP;AACD","sourcesContent":["import {Array as ArrayT} from './Array.js';\nimport {Number as NumberT} from './Number.js';\nimport * as utils from './utils.js';\n\nexport class LazyArray extends ArrayT {\n  decode(stream, parent) {\n    const { pos } = stream;\n    const length = utils.resolveLength(this.length, stream, parent);\n\n    if (this.length instanceof NumberT) {\n      parent = {\n        parent,\n        _startOffset: pos,\n        _currentOffset: 0,\n        _length: length\n      };\n    }\n\n    const res = new LazyArrayValue(this.type, length, stream, parent);\n\n    stream.pos += length * this.type.size(null, parent);\n    return res;\n  }\n\n  size(val, ctx) {\n    if (val instanceof LazyArrayValue) {\n      val = val.toArray();\n    }\n\n    return super.size(val, ctx);\n  }\n\n  encode(stream, val, ctx) {\n    if (val instanceof LazyArrayValue) {\n      val = val.toArray();\n    }\n\n    return super.encode(stream, val, ctx);\n  }\n}\n\nclass LazyArrayValue {\n  constructor(type, length, stream, ctx) {\n    this.type = type;\n    this.length = length;\n    this.stream = stream;\n    this.ctx = ctx;\n    this.base = this.stream.pos;\n    this.items = [];\n  }\n\n  get(index) {\n    if ((index < 0) || (index >= this.length)) {\n      return undefined;\n    }\n\n    if (this.items[index] == null) {\n      const { pos } = this.stream;\n      this.stream.pos = this.base + (this.type.size(null, this.ctx) * index);\n      this.items[index] = this.type.decode(this.stream, this.ctx);\n      this.stream.pos = pos;\n    }\n\n    return this.items[index];\n  }\n\n  toArray() {\n    const result = [];\n    for (let i = 0, end = this.length; i < end; i++) {\n      result.push(this.get(i));\n    }\n    return result;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}