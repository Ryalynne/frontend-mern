{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Base } from './Base.js';\nimport { Number as NumberT } from './Number.js';\nimport * as utils from './utils.js';\n\nvar ArrayT = /*#__PURE__*/function (_Base) {\n  _inherits(ArrayT, _Base);\n\n  var _super = _createSuper(ArrayT);\n\n  function ArrayT(type, length) {\n    var _this;\n\n    var lengthType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'count';\n\n    _classCallCheck(this, ArrayT);\n\n    _this = _super.call(this);\n    _this.type = type;\n    _this.length = length;\n    _this.lengthType = lengthType;\n    return _this;\n  }\n\n  _createClass(ArrayT, [{\n    key: \"decode\",\n    value: function decode(stream, parent) {\n      var length;\n      var pos = stream.pos;\n      var res = [];\n      var ctx = parent;\n\n      if (this.length != null) {\n        length = utils.resolveLength(this.length, stream, parent);\n      }\n\n      if (this.length instanceof NumberT) {\n        // define hidden properties\n        Object.defineProperties(res, {\n          parent: {\n            value: parent\n          },\n          _startOffset: {\n            value: pos\n          },\n          _currentOffset: {\n            value: 0,\n            writable: true\n          },\n          _length: {\n            value: length\n          }\n        });\n        ctx = res;\n      }\n\n      if (length == null || this.lengthType === 'bytes') {\n        var target = length != null ? stream.pos + length : (parent != null ? parent._length : undefined) ? parent._startOffset + parent._length : stream.length;\n\n        while (stream.pos < target) {\n          res.push(this.type.decode(stream, ctx));\n        }\n      } else {\n        for (var i = 0, end = length; i < end; i++) {\n          res.push(this.type.decode(stream, ctx));\n        }\n      }\n\n      return res;\n    }\n  }, {\n    key: \"size\",\n    value: function size(array, ctx) {\n      var includePointers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n      if (!array) {\n        return this.type.size(null, ctx) * utils.resolveLength(this.length, null, ctx);\n      }\n\n      var size = 0;\n\n      if (this.length instanceof NumberT) {\n        size += this.length.size();\n        ctx = {\n          parent: ctx,\n          pointerSize: 0\n        };\n      }\n\n      var _iterator = _createForOfIteratorHelper(array),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var item = _step.value;\n          size += this.type.size(item, ctx);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      if (ctx && includePointers && this.length instanceof NumberT) {\n        size += ctx.pointerSize;\n      }\n\n      return size;\n    }\n  }, {\n    key: \"encode\",\n    value: function encode(stream, array, parent) {\n      var ctx = parent;\n\n      if (this.length instanceof NumberT) {\n        ctx = {\n          pointers: [],\n          startOffset: stream.pos,\n          parent: parent\n        };\n        ctx.pointerOffset = stream.pos + this.size(array, ctx, false);\n        this.length.encode(stream, array.length);\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(array),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var item = _step2.value;\n          this.type.encode(stream, item, ctx);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      if (this.length instanceof NumberT) {\n        var i = 0;\n\n        while (i < ctx.pointers.length) {\n          var ptr = ctx.pointers[i++];\n          ptr.type.encode(stream, ptr.val, ptr.parent);\n        }\n      }\n    }\n  }]);\n\n  return ArrayT;\n}(Base);\n\nexport { ArrayT as Array };","map":{"version":3,"sources":["C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/restructure/src/Array.js"],"names":["Base","Number","NumberT","utils","ArrayT","type","length","lengthType","stream","parent","pos","res","ctx","resolveLength","Object","defineProperties","value","_startOffset","_currentOffset","writable","_length","target","undefined","push","decode","i","end","array","includePointers","size","pointerSize","item","pointers","startOffset","pointerOffset","encode","ptr","val","Array"],"mappings":"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","sourcesContent":["import {Base} from './Base.js';\nimport {Number as NumberT} from './Number.js';\nimport * as utils from './utils.js';\n\nclass ArrayT extends Base {\n  constructor(type, length, lengthType = 'count') {\n    super();\n    this.type = type;\n    this.length = length;\n    this.lengthType = lengthType;\n  }\n\n  decode(stream, parent) {\n    let length;\n    const { pos } = stream;\n\n    const res = [];\n    let ctx = parent;\n\n    if (this.length != null) {\n      length = utils.resolveLength(this.length, stream, parent);\n    }\n\n    if (this.length instanceof NumberT) {\n      // define hidden properties\n      Object.defineProperties(res, {\n        parent:         { value: parent },\n        _startOffset:   { value: pos },\n        _currentOffset: { value: 0, writable: true },\n        _length:        { value: length }\n      });\n\n      ctx = res;\n    }\n\n    if ((length == null) || (this.lengthType === 'bytes')) {\n      const target = (length != null) ?\n        stream.pos + length\n      : (parent != null ? parent._length : undefined) ?\n        parent._startOffset + parent._length\n      :\n        stream.length;\n\n      while (stream.pos < target) {\n        res.push(this.type.decode(stream, ctx));\n      }\n\n    } else {\n      for (let i = 0, end = length; i < end; i++) {\n        res.push(this.type.decode(stream, ctx));\n      }\n    }\n\n    return res;\n  }\n\n  size(array, ctx, includePointers = true) {\n    if (!array) {\n      return this.type.size(null, ctx) * utils.resolveLength(this.length, null, ctx);\n    }\n\n    let size = 0;\n    if (this.length instanceof NumberT) {\n      size += this.length.size();\n      ctx = {parent: ctx, pointerSize: 0};\n    }\n\n    for (let item of array) {\n      size += this.type.size(item, ctx);\n    }\n\n    if (ctx && includePointers && this.length instanceof NumberT) {\n      size += ctx.pointerSize;\n    }\n    \n    return size;\n  }\n\n  encode(stream, array, parent) {\n    let ctx = parent;\n    if (this.length instanceof NumberT) {\n      ctx = {\n        pointers: [],\n        startOffset: stream.pos,\n        parent\n      };\n\n      ctx.pointerOffset = stream.pos + this.size(array, ctx, false);\n      this.length.encode(stream, array.length);\n    }\n\n    for (let item of array) {\n      this.type.encode(stream, item, ctx);\n    }\n\n    if (this.length instanceof NumberT) {\n      let i = 0;\n      while (i < ctx.pointers.length) {\n        const ptr = ctx.pointers[i++];\n        ptr.type.encode(stream, ptr.val, ptr.parent);\n      }\n    }\n  }\n}\n\nexport {ArrayT as Array};\n"]},"metadata":{},"sourceType":"module"}