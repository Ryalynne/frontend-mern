{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\PC\\\\Documents\\\\PROGRAMMING\\\\MERN\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import{pdf}from\"@react-pdf/renderer\";import SalaryPDF from\"../Printing/SalaryPDF\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SalaryList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),salaries=_useState2[0],setSalary=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];var _useState5=useState(10),_useState6=_slicedToArray(_useState5,2),entriesToShow=_useState6[0],setEntriesToShow=_useState6[1];var _useState7=useState(window.innerWidth<768),_useState8=_slicedToArray(_useState7,2),isMobile=_useState8[0],setIsMobile=_useState8[1];useEffect(function(){getUsers();// Handle screen resizing\nvar handleResize=function handleResize(){return setIsMobile(window.innerWidth<768);};window.addEventListener(\"resize\",handleResize);return function(){return window.removeEventListener(\"resize\",handleResize);};},[]);var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:5000/salary\");case 3:response=_context.sent;setSalary(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching salaries:\",_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getUsers(){return _ref.apply(this,arguments);};}();var filteredSalaries=salaries.filter(function(user){return\"\".concat(user.Job_Title,\" \").concat(user.position).toLowerCase().includes(searchTerm.toLowerCase());});var displayedSalaries=filteredSalaries.slice(0,entriesToShow);// Generate and open PDF\nvar handleViewPDF=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var blob,url;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return pdf(/*#__PURE__*/_jsx(SalaryPDF,{salaries:salaries})).toBlob();case 2:blob=_context2.sent;url=URL.createObjectURL(blob);window.open(url);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleViewPDF(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"column container mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"is-flex is-justify-content-space-between mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",style:{maxWidth:\"300px\"},placeholder:\"Search by Job Title or Position...\",value:searchTerm,onChange:function onChange(e){return setSearchTerm(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/AddSalary\",className:\"button is-success\",children:\"Add Position\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleViewPDF,className:\"button is-info ml-3\",children:\"View PDF\"})]})]}),!isMobile&&/*#__PURE__*/_jsxs(\"table\",{className:\"table is-striped is-fullwidth\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Salary ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Job Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Position / Level\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Salary\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:displayedSalaries.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"\",children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.Job_Title}),/*#__PURE__*/_jsx(\"td\",{children:user.position}),/*#__PURE__*/_jsx(\"td\",{children:user.salary?\"\\u20B1\".concat(parseFloat(user.salary).toLocaleString(\"en-PH\",{minimumFractionDigits:2})):\"N/A\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/editSalary/\".concat(user.id),className:\"button is-small is-info\",children:\"Edit\"})})]},user.id);})})]}),isMobile&&/*#__PURE__*/_jsx(\"div\",{className:\"columns is-multiline\",children:displayedSalaries.map(function(user){return/*#__PURE__*/_jsx(\"div\",{className:\"column is-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title\",children:user.Job_Title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"subtitle is-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Salary ID:\"}),\" \",user.id]}),/*#__PURE__*/_jsxs(\"p\",{className:\"subtitle is-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Position:\"}),\" \",user.position]}),/*#__PURE__*/_jsxs(\"p\",{className:\"subtitle is-6\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Salary:\"}),\" \",user.salary?\"\\u20B1\".concat(parseFloat(user.salary).toLocaleString(\"en-PH\",{minimumFractionDigits:2})):\"N/A\"]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"card-footer\",children:/*#__PURE__*/_jsx(Link,{to:\"/editSalary/\".concat(user.id),className:\"card-footer-item button is-small is-info\",children:\"Edit\"})})]})},user.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"is-flex is-align-items-center is-justify-content-space-between mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"mr-2\",children:\"Show entries:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"select\",children:/*#__PURE__*/_jsxs(\"select\",{value:entriesToShow,onChange:function onChange(e){return setEntriesToShow(Number(e.target.value));},children:[/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"}),/*#__PURE__*/_jsx(\"option\",{value:\"10\",children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:\"20\",children:\"20\"}),/*#__PURE__*/_jsx(\"option\",{value:filteredSalaries.length,children:\"All\"})]})})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Showing \",displayedSalaries.length,\" of \",filteredSalaries.length,\" \",\"entries\"]})]})]});}export default SalaryList;","map":{"version":3,"sources":["C:/Users/PC/Documents/PROGRAMMING/MERN/frontend/src/components/Salary/SalaryList.js"],"names":["React","useState","useEffect","axios","Link","pdf","SalaryPDF","SalaryList","salaries","setSalary","searchTerm","setSearchTerm","entriesToShow","setEntriesToShow","window","innerWidth","isMobile","setIsMobile","getUsers","handleResize","addEventListener","removeEventListener","get","response","data","console","error","filteredSalaries","filter","user","Job_Title","position","toLowerCase","includes","displayedSalaries","slice","handleViewPDF","toBlob","blob","url","URL","createObjectURL","open","maxWidth","e","target","value","map","id","salary","parseFloat","toLocaleString","minimumFractionDigits","Number","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { pdf } from \"@react-pdf/renderer\";\r\nimport SalaryPDF from \"../Printing/SalaryPDF\";\r\n\r\nfunction SalaryList() {\r\n  const [salaries, setSalary] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [entriesToShow, setEntriesToShow] = useState(10);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    getUsers();\r\n\r\n    // Handle screen resizing\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []);\r\n\r\n  const getUsers = async () => {\r\n    try {\r\n      const response = await axios.get(\"http://localhost:5000/salary\");\r\n      setSalary(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching salaries:\", error);\r\n    }\r\n  };\r\n\r\n  const filteredSalaries = salaries.filter((user) =>\r\n    `${user.Job_Title} ${user.position}`\r\n      .toLowerCase()\r\n      .includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const displayedSalaries = filteredSalaries.slice(0, entriesToShow);\r\n\r\n  // Generate and open PDF\r\n  const handleViewPDF = async () => {\r\n    const blob = await pdf(<SalaryPDF salaries={salaries} />).toBlob();\r\n    const url = URL.createObjectURL(blob);\r\n    window.open(url);\r\n  };\r\n\r\n  return (\r\n    <div className=\"column container mt-5\">\r\n      {/* Search & Actions */}\r\n      <div className=\"is-flex is-justify-content-space-between mb-3\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"input\"\r\n          style={{ maxWidth: \"300px\" }}\r\n          placeholder=\"Search by Job Title or Position...\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n        />\r\n        <div>\r\n          <Link to=\"/AddSalary\" className=\"button is-success\">\r\n            Add Position\r\n          </Link>\r\n          <button onClick={handleViewPDF} className=\"button is-info ml-3\">\r\n            View PDF\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table View (Desktop) */}\r\n      {!isMobile && (\r\n        <table className=\"table is-striped is-fullwidth\">\r\n          <thead>\r\n            <tr>\r\n              <th>Salary ID</th>\r\n              <th>Job Title</th>\r\n              <th>Position / Level</th>\r\n              <th>Salary</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {displayedSalaries.map((user) => (\r\n              <tr key={user.id}>\r\n                <td className=\"\">{user.id}</td>\r\n                <td>{user.Job_Title}</td>\r\n                <td>{user.position}</td>\r\n                <td>\r\n                  {user.salary\r\n                    ? `₱${parseFloat(user.salary).toLocaleString(\"en-PH\", {\r\n                        minimumFractionDigits: 2,\r\n                      })}`\r\n                    : \"N/A\"}\r\n                </td>\r\n                <td>\r\n                  <Link\r\n                    to={`/editSalary/${user.id}`}\r\n                    className=\"button is-small is-info\"\r\n                  >\r\n                    Edit\r\n                  </Link>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n\r\n      {/* Card View (Mobile) */}\r\n      {isMobile && (\r\n        <div className=\"columns is-multiline\">\r\n          {displayedSalaries.map((user) => (\r\n            <div key={user.id} className=\"column is-12\">\r\n              <div className=\"card\">\r\n                <header className=\"card-header\">\r\n                  <p className=\"card-header-title\">{user.Job_Title}</p>\r\n                </header>\r\n                <div className=\"card-content\">\r\n                  <p className=\"subtitle is-6\">\r\n                    <strong>Salary ID:</strong> {user.id}\r\n                  </p>\r\n                  <p className=\"subtitle is-6\">\r\n                    <strong>Position:</strong> {user.position}\r\n                  </p>\r\n                  <p className=\"subtitle is-6\">\r\n                    <strong>Salary:</strong>{\" \"}\r\n                    {user.salary\r\n                      ? `₱${parseFloat(user.salary).toLocaleString(\"en-PH\", {\r\n                          minimumFractionDigits: 2,\r\n                        })}`\r\n                      : \"N/A\"}\r\n                  </p>\r\n                </div>\r\n                <footer className=\"card-footer\">\r\n                  <Link\r\n                    to={`/editSalary/${user.id}`}\r\n                    className=\"card-footer-item button is-small is-info\"\r\n                  >\r\n                    Edit\r\n                  </Link>\r\n                </footer>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Footer - Entry Controls */}\r\n      <div className=\"is-flex is-align-items-center is-justify-content-space-between mt-3\">\r\n        <div>\r\n          <label className=\"mr-2\">Show entries:</label>\r\n          <div className=\"select\">\r\n            <select\r\n              value={entriesToShow}\r\n              onChange={(e) => setEntriesToShow(Number(e.target.value))}\r\n            >\r\n              <option value=\"5\">5</option>\r\n              <option value=\"10\">10</option>\r\n              <option value=\"20\">20</option>\r\n              <option value={filteredSalaries.length}>All</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <p>\r\n          Showing {displayedSalaries.length} of {filteredSalaries.length}{\" \"}\r\n          entries\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SalaryList;\r\n"]},"metadata":{},"sourceType":"module"}